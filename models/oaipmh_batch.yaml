record:
  use: [ invenio ]
  module:
    qualified: oarepo_oaipmh_harvester.oai_batch
    alias: oarepo-oaipmh-batch
  service-config:
    components:
      - invenio_records_resources.services.records.components.DataComponent

  properties:
    run:
      label.cs: Běh harvestru
      label.en: Harvester run
      type: relation
      model: oaipmh-run
      keys:
      - key: id
        model:
          type: keyword
      required: true

    status: 
      label.cs: Stav běhu
      label.en: Status
      enum.R.cs: Běží
      enum.O.cs: Skončeno OK
      enum.W.cs: Varování
      enum.E.cs: Chyba
      enum.I.cs: Přerušeno
      enum.R.en: Running
      enum.O.en: Finished
      enum.W.en: Warning
      enum.E.en: Error
      enum.I.en: Interrupted
      type: keyword
      enum: [ R, O, W, E, I ]
      required: true
    
    identifiers[]:
      label.cs: OAI Identifikátory
      label.en: OAI Identifiers
      type: keyword

    errors[]: 
      label.cs: Chyby
      label.en: Errors
      properties:
        oai_identifier:
          label.cs: OAI identifikátor
          label.en: OAI identifier
          type: keyword
        error_type:
          label.cs: Typ chyby
          label.en: Error type
          type: keyword
        error_message:
          label.cs: Chybová hodnota
          label.en: Error message
          type: fulltext+keyword

    started:
      label.cs: Začátek běhu
      label.en: Start time
      type: datetime
    
    finished:
      label.cs: Konec běhu
      label.en: End time
      type: datetime

    manual:
      label.cs: Manuálně spuštěno?
      label.en: Manual?
      type: boolean

  plugins:
    builder:
      disable: 
      - script_sample_data
      - invenio_cli_setup_cfg
      - invenio_cli
      - invenio_record_metadata_alembic_setup_cfg
  permissions:
    presets:
    - oai_harvester

settings:
  schema-server: 'local://'
  i18n-languages: ['cs', 'en']
