{#
  Copyright (C) 2020 CERN.

  Invenio App RDM is free software; you can redistribute it and/or modify it
  under the terms of the MIT License; see LICENSE file for more details.
#}

{%- from "invenio_administration/macros.html" import go_back %}
{% extends admin_base_template %}

{% block page_title %}

  {{ go_back() }}
{% set current_url = request.url %}
{% set base_url = current_url.split('/administration/harvesters/' + pid)[0] %}
{% set harvest_url = base_url + '/api/harvest/' + pid + '/execute' %}


<style>
    .custom-button {
        background-color: #a333c8;
        color: white;
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        cursor: pointer;
        border-radius: 5px;
        margin-left: 3%;
        margin-bottom: 50px;

    }
</style>



<button id="harvest-button" class="custom-button">
    <a href="{{ harvest_url }}" target="_blank" style="text-decoration: none; color: inherit;">Harvest</a>
</button>
{% endblock page_title %}
{% block admin_page_content %}





  <div
    id='invenio-details-config'
    data-actions='{{ actions | tojson }}'
    data-api-endpoint='{{ api_endpoint }}'
    data-display-delete='{{ display_delete | tojson }}'
    data-display-edit='{{ display_edit | tojson }}'
    data-exclude-fields='{{ exclude_fields | tojson }}'
    data-fields='{{ fields | tojson }}'
    data-pid='{{ pid | tojson }}'
    data-resource-schema='{{ resource_schema | tojson }}'
    data-ui-config='{{ ui_config | tojson }}'
    data-title='{{ title or name | tojson }}'
    data-list-endpoint='{{ list_ui_endpoint }}'
    data-resource-name='{{ resource_name | tojson }}'
    data-pid-path='{{ pid_path | tojson }}'
    data-request-headers='{{ request_headers | tojson }}'
  >
  </div>

{% endblock admin_page_content %}

{% block javascript %}
  {{ super() }}
  {{ webpack['invenio-administration-details.js'] }}
{% endblock %}